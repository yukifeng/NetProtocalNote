## 网络协议笔记1
### 计算机的连接方式
 - 网线直连
 - 同轴电缆
 	- 半双工通信
 	- 容易冲突
 	- 不安全
 	- 中间断了，整条线路瘫痪
 - 集线器
	- 半双工通信
	- 容易冲突
	- 不安全
	- 没有智商（每次发请求会向所有同网段的设备发送）
- 网桥
	- 可以通过自学获取每个接口的Mac地址
	- 隔绝冲突域
- 交换机
   - 相当于接口更多的网桥
   - 全双工通信
   - 比集线器安全
- 路由器
	- 可以在不同网段之间转发数据
	- 隔绝广播域

### IP地址
#### 公网IP，私网IP
- 公网：统一分配
- 私网：
 - A类：10.0.0.0/8 1个A类网络
 - B类：172.16。0.0/16 ～ 172.31.0.0/16 16个B类网络
 - C类：192.168.0.0/24 ～ 192.168.255.0/24 256个C类网络

#### IP详情
- 两部分组成
 - 网络ID
 - 主机ID
 	 1. 主机ID全为0:表示主机所在的网段
 	 2. 主机ID全为1:表示主机所在的所有主机（广播）
- 主机所在的网段 = IP地址 & 子网掩码
- 计算机通信前会判断对方是否在同一网段，同一网段不需要路由器，不同网段需要路由器转发
- A类地址
	- 网络ID：0XXXXXXX
		1. 0不能用，127作为保留网段，127.0.0.1代表本机地址
		2. 可以分配给主机的网络ID为1-126
	-  主机ID 后24位
		1. 每部分取值为0-255，最大主机数 256^3 - 2
- B类地址
	- 网络ID：10XXXXXX (128-191)
		1. 可以分配给主机的网络ID为128-191
		2. 第二部分取值0-255
	-  主机ID 后16位
		1. 每部分取值为0-255，最大主机数 256^2 - 2
- C类地址
	- 网络ID：110XXXXX (192-223)
		1. 可以分配给主机的网络ID为192-223
		2. 第2、3部分取值0-255
	-  主机ID 后8位
		1. 每部分取值为0-255，最大主机数 256 - 2
- D类地址
	- 没有子网掩码，用于多播
	- 网络ID：1110XXXX （224-239）
- E类地址
 - 保留为今后使用
 - 网络ID：1111XXXX （240-255）

#### 子网划分
- 等长子网划分
	- 把主机位的字节交由网络位，每往网络位移动一位，可以使相同网段的子网缩减1/2
- 变长子网划分
 - 将子网掩码在原基础上增加N个1，例：对192.168.0.0/24 变长子网划分的子网掩码
	 	1. 255.255.255.128/25
 		2. 255.255.255.192/26
	 	3. 255.255.255.224/27
 		4. 255.255.255.252/30
 		5. 255.255.255.252/30

####两台设备直连的通信
用自己的子网掩码和对方的IP地址判断与自己是否在同一个网段，真实在同一个网段的不同子网掩码的两台设备无法通信
#### 超网
把网络位的字节交由主机位，每往主机位移动一位，可以使相同网段的子网扩大2倍

#### 路由
- 在不同网段转发数据，需要路由
- 默认路由只知道直连的网段，非直连需要由静态路由和动态路由告诉他
- 静态路由
	- 管理员手动添加路由信息
	- 适用于小规模网络
- 动态路由
	 - 通过路由协议（如RIP，OSPF）自动获取
	 - 适合大规模网络
- 路由链接不同设备间的通讯
[![yOHiTJ.png](https://s3.ax1x.com/2021/02/24/yOHiTJ.png)](https://imgtu.com/i/yOHiTJ)

- 红圈代表同一网段
- 路由发现未知网段后根据下一跳设置找到转发路由设备