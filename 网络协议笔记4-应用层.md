# 网络协议笔记4-应用层

## 应用层常见协议

 - 超文本传输协议：HTTP，HTTPS
 - 文件传输：FTP
 - 电子邮件：SMTP、POP3、IMAP
 - 动态主机配置：DHCP
 - 域名系统：DNS

 ### 域名
 - 包含顶级、二级等等域名，
	 - 顶级是.com .org .edu等
	 - 二级是.com等等前面一级
	 - 以此类推
	
 ### DNS
 - 全称是Domain Name System 域名系统
	 - 利用DNS协议，可以将域名解析成对应的ip地址
	 - DNS可以基于UDP，也可以基于TCP协议，占用端口53
	 - DNS服务器解析步骤图示：
	 ![WX20210316-182106@2x](https://raw.githubusercontent.com/yukifeng/pictureBed/master/uPic/2021/03/16/WX20210316-182106@2x.png)

### IP地址分配

- 分为静态IP地址和动态IP地址
	- 静态IP地址
		- 手动设置
		- 使用场景：不怎么挪动的台式机，服务器等
	- 动态IP地址
		-  从DHCP服务器自动获取IP地址
			-  DHCP:(Dynamic Host Protocol)，动态主机配置协议，基于UDP协议，客户端是68端口，服务器是67端口
			-  DHCP服务器会在IP地址池中选择一个IP地址出租给客户端，过一段时间会回收
		-  使用场景：移动设备，无线设备

-  DHCP分配IP的四个阶段
	-  DISCOVER：发现服务器。发广播包（源ip：0.0.0.0 目标IP：255.255.255.255，目标MAC：FF：FF：FF：FF：FF：FF）
	-  OFFER：提供租约：服务器返回可以租用的IP，租用期限，子网掩码，网关，DNS等
	-  REQUEST：选择IP地址：客户端选择一个offer，发送广播包回应
	-  ACKNOWLEDGE：确认：被选中的服务器发送ACK数据包给客户端，ip地址分配完毕

####DHCP细节
- DHCP可以跨网段分配IP地址，借助中继代理实现
- 客户端在租期不足的时候，自动向DHCP服务器发送REQUEST信息申请续约